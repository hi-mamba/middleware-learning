

# es常用方法


## elasticsearch将javaAPI的搜索串打印成可以直接搜索的DSL

构建随意的一个QueryBuilder，在institution_name 和institution_research中进行或的查询,搜索采用ik分词，

> 机构的研究方向用ik_max_word，小粒度，机构的名用大粒度，ik_smart，分值加权分别是1.5和1.0（仅用于演示，搜索设计不细思）

```java
String query="人工智能";
QueryBuilder queryBuilder = QueryBuilders.boolQuery()
        .should(QueryBuilders.matchQuery("institution_research", query).analyzer("ik_max_word").boost(1.5f))
        .should(QueryBuilders.matchQuery("institution_name", query).analyzer("ik_smart").boost(1.0f));
```

打印dsl 
```java
SearchSourceBuilder searchSourceBuilder = new SearchSourceBuilder();
searchSourceBuilder.query(queryBuilder);
System.out.println("拼接的查询请求======");
System.out.println(“打印dsl=”+searchSourceBuilder.toString());
```
这里打印出来的值可以直接放到kibana 那里查询

<https://blog.csdn.net/Barbarousgrowth_yp/article/details/81535745>
